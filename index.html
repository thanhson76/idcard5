<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>International Student ID Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="js/1.4.1-html2canvas.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');
    body {
      font-family: 'Inter', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif';
    }
    /* Beautiful file upload button */
    input[type="file"]::file-selector-button {
      font-weight: 600;
      color: #dc2626;
      padding: 0.5em 1em;
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: 0.375rem;
      background-color: #fef2f2;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    input[type="file"]::file-selector-button:hover {
      background-color: #fee2e2;
    }
    /* Color picker styles */
    input[type="color"] {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      width: 100%;
      height: 40px;
      padding: 0;
      border: none;
      background-color: transparent;
      cursor: pointer;
    }
    input[type="color"]::-webkit-color-swatch-wrapper {
      padding: 0;
    }
    input[type="color"]::-webkit-color-swatch {
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
    }
    input[type="color"]::-moz-color-swatch {
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
    }
    /* Signature style */
    .signature-text {
      font-family: 'Dancing Script', cursive;
      font-size: 1.5rem;
      line-height: 2rem;
      color: #1f2937;
    }
  </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4 md:p-8">
  <div class="container w-full max-w-7xl mx-auto bg-white rounded-2xl shadow-2xl p-6 md:p-10">
    <div class="text-center mb-4">
      <h1 class="text-3xl md:text-4xl font-bold text-red-600">International Student ID Generator</h1>
      <p class="text-gray-500 mt-2">Create a custom identity card for international students (front and back).</p>
    </div>
    <div class="flex justify-center mb-8">
      <button id="randomFillBtn" class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition">Randomly Fill All Info</button>
    </div>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12">
      <div class="p-6 bg-gray-50 rounded-xl border border-gray-200">
        <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-3">üìù Front Side Information</h2>
        <div class="space-y-5 mb-8">
          <div>
            <label for="universityName" class="block text-sm font-medium text-gray-700 mb-1">University Name (English)</label>
            <input type="text" id="universityName" placeholder="e.g., International University" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
          </div>
          <div>
            <label for="studentName" class="block text-sm font-medium text-gray-700 mb-1">Student Name (Full English Name)</label>
            <input type="text" id="studentName" placeholder="e.g., John Appleseed" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
          </div>
          <div>
            <label for="studentId" class="block text-sm font-medium text-gray-700 mb-1">Student ID</label>
            <input type="text" id="studentId" placeholder="e.g., INT2025001" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
          </div>
          <div>
            <label for="faculty" class="block text-sm font-medium text-gray-700 mb-1">Faculty/Major (English)</label>
            <input type="text" id="faculty" placeholder="e.g., Faculty of Computer Science" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label for="issueDate" class="block text-sm font-medium text-gray-700 mb-1">Issue Date</label>
              <input type="date" id="issueDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
            </div>
            <div>
              <label for="expiryDate" class="block text-sm font-medium text-gray-700 mb-1">Valid Until</label>
              <input type="date" id="expiryDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Upload or Generate Photo</label>
            <div class="flex items-center space-x-2">
              <input type="file" id="studentPhoto" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100">
              <button type="button" id="generatePhotoBtn" class="px-3 py-2 bg-gray-600 text-white rounded-lg text-sm whitespace-nowrap hover:bg-gray-700 transition">Generate</button>
            </div>
          </div>
          <div>
            <label for="schoolLogo" class="block text-sm font-medium text-gray-700 mb-1">Upload School Logo (Optional)</label>
            <input type="file" id="schoolLogo" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100">
          </div>
          <div>
            <label for="headerColor" class="block text-sm font-medium text-gray-700 mb-1">Custom Header Color</label>
            <input type="color" id="headerColor" value="#dc2626">
          </div>
        </div>
        <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-3">üîô Back Side Information</h2>
        <div class="space-y-5">
          <div>
            <label for="cardHolderAddress" class="block text-sm font-medium text-gray-700 mb-1">Card Holder Address (English)</label>
            <input type="text" id="cardHolderAddress" placeholder="e.g., 123 Main Street, Anytown" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
          </div>
          <div>
            <label for="officialNotes" class="block text-sm font-medium text-gray-700 mb-1">Official Notes/Statement (English)</label>
            <textarea id="officialNotes" rows="3" placeholder="This card is the property of the university and must be returned upon request. If found, please return to the nearest university office." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition"></textarea>
          </div>
        </div>
      </div>
      <div class="flex flex-col items-center">
        <h2 class="text-xl font-semibold text-gray-800 mb-6">üñºÔ∏è Preview</h2>
        <div id="idCardFront" class="w-[380px] min-h-[240px] bg-white rounded-xl shadow-lg flex flex-col transition-all duration-300 overflow-hidden border">
          <div id="cardHeader" class="text-white p-3 flex items-center space-x-3">
            <div id="cardHeaderLogoContainer" class="w-12 h-12 rounded-full bg-white p-1 flex items-center justify-center overflow-hidden hidden">
              <img id="cardHeaderLogo" src="images/https:-student.frp.gs" alt="School Logo" class="max-w-full max-h-full object-contain rounded-full">
            </div>
            <div id="headerContentWrapper" class="flex flex-col">
              <h3 id="cardUniversityNameHeader" class="font-bold text-base leading-tight m-0">UNIVERSITY NAME</h3>
              <p class="text-xs opacity-90 leading-tight m-0">INTERNATIONAL STUDENT ID CARD</p>
            </div>
          </div>
          <div class="flex flex-grow p-4">
            <div class="flex-shrink-0 mr-4">
              <img id="cardPhoto" src="images/default-photo.svg" alt="Student Photo" class="w-[128px] h-[128px] object-cover border-2 border-white rounded-md shadow-md bg-gray-200">
            </div>
            <div class="text-xs text-gray-800 w-full flex flex-col justify-between">
              <div>
                <p class="font-semibold text-gray-500">NAME</p>
                <p class="font-bold text-sm" id="cardStudentName">STUDENT NAME</p>
              </div>
              <div>
                <p class="font-semibold text-gray-500">STUDENT ID</p>
                <p class="font-bold text-sm" id="cardStudentId">STUDENT ID</p>
              </div>
              <div>
                <p class="font-semibold text-gray-500">FACULTY</p>
                <p class="font-bold text-sm" id="cardFaculty">FACULTY NAME</p>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-2 flex justify-between items-center border-t mt-auto">
            <div class="text-xs">
              <p class="text-gray-500">ISSUE</p>
              <p class="font-semibold" id="cardIssueDate">YYYY-MM-DD</p>
            </div>
            <div class="text-xs text-right">
              <p class="text-gray-500">VALID</p>
              <p class="font-semibold" id="cardExpiryDate">YYYY-MM-DD</p>
            </div>
          </div>
        </div>
        <button id="downloadFrontBtn" class="mt-4 w-full max-w-xs bg-red-600 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-transform transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:transform-none" disabled>Download Front (PNG)</button>
        <hr class="my-8 w-full max-w-xs">
        <div id="idCardBack" class="w-[380px] h-[240px] bg-white rounded-xl shadow-lg flex flex-col transition-all duration-300 overflow-hidden border">
          <div class="w-full h-10 bg-black mt-4"></div>
          <div class="p-4 text-xs text-gray-700 flex-grow">
            <p class="font-semibold text-gray-500">HOLDER'S ADDRESS:</p>
            <p id="cardBackAddress" class="mb-3">HOLDER'S ADDRESS</p>
            <p id="cardBackNotes" class="text-[10px] leading-tight"></p>
          </div>
          <div class="px-4 pb-4 flex justify-between items-end">
            <div class="text-left">
              <div id="cardSignatureText" class="signature-text">Your Name</div>
              <p class="text-[10px] text-gray-500 pt-1">Holder's Signature</p>
            </div>
            <img id="cardBackLogo" src="images/https:-student.frp.gs" alt="School Logo" class="w-[70px] h-[70px] object-contain hidden">
          </div>
        </div>
        <button id="downloadBackBtn" class="mt-4 w-full max-w-xs bg-gray-700 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-transform transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:transform-none" disabled>Download Back (PNG)</button>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Mock data for random fill
      const mockData = {
        names: ['John Smith', 'Emily Johnson', 'Michael Williams', 'Jessica Brown', 'David Jones', 'Sarah Miller', 'John Smith', 'Emily Johnson', 'Michael Williams', 'Sophia Brown', 'William Jones', 'Olivia Garcia', 'James Miller', 'Ava Davis', 'Robert Rodriguez', 'Isabella Martinez', 'David Hernandez', 'Mia Lopez', 'Joseph Gonzalez', 'Charlotte Wilson', 'Charles Anderson', 'Amelia Thomas', 'Thomas Moore', 'Harper Jackson', 'Daniel White', 'Evelyn Harris'],
        universities: ['International University of Science', 'Global Tech Institute', 'Metropolitan University', 'World Arts College', 'United Scholars University' 'Princeton University', 'Massachusetts Institute of Technology (MIT)', 'Harvard University', 'Stanford University', 'Yale University',,'University of Pennsylvania', 'California Institute of Technology (Caltech)', 'Duke University', 'Brown University', 'Johns Hopkins University', 'Northwestern University', 'Columbia University', 'Cornell University', 'University of Chicago', 'University of California, Berkeley (UC Berkeley)', 'University of California, Los Angeles (UCLA)', 'Carnegie Mellon University', 'Georgetown University', 'University of Michigan - Ann Arbor', 'New York University (NYU)'],
        faculties: ['Computer Science', 'International Relations', 'Medicine', 'Economics', 'Linguistics', 'Engineering'],
        addresses: [
			'123 Main Street, Anytown, USA',
			'456 Oak Avenue, Springfield, USA',
			'789 Pine Lane, Metropolis, USA',
			'101 Maple Drive, Gotham, USA'
			'Princeton, NJ 08544, USA'
			'77 Massachusetts Ave, Cambridge, MA 02139, USA'
			'Cambridge, MA 02138, USA'
			'Stanford, CA 94305, USA'
			'New Haven, CT 06520, USA'
			'Philadelphia, PA 19104, USA'
			'1200 E California Blvd, Pasadena, CA 91125, USA'
			'Durham, NC 27708, USA'
			'Providence, RI 02912, USA'
			'Baltimore, MD 21218, USA'
			'Evanston, IL 60208, USA'
			'New York, NY 10027, USA'
			'Ithaca, NY 14853, USA'
			'Chicago, IL 60637, USA'
			'Berkeley, CA 94720, USA'
			'Los Angeles, CA 90095, USA'
			'Pittsburgh, PA 15213, USA'
			'Washington, DC 20057, USA'
			'Ann Arbor, MI 48109, USA'
			'New York, NY 10003, USA'
        ]
      };

      function getRandomItem(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
      }

      // DOM Element References
      const inputs = {
        universityName: document.getElementById('universityName'),
        studentName: document.getElementById('studentName'),
        studentId: document.getElementById('studentId'),
        faculty: document.getElementById('faculty'),
        issueDate: document.getElementById('issueDate'),
        expiryDate: document.getElementById('expiryDate'),
        studentPhoto: document.getElementById('studentPhoto'),
        schoolLogo: document.getElementById('schoolLogo'),
        headerColor: document.getElementById('headerColor'),
        cardHolderAddress: document.getElementById('cardHolderAddress'),
        officialNotes: document.getElementById('officialNotes'),
      };

      const cardFrontElements = {
        header: document.getElementById('cardHeader'),
        universityNameHeader: document.getElementById('cardUniversityNameHeader'),
        studentName: document.getElementById('cardStudentName'),
        studentId: document.getElementById('cardStudentId'),
        faculty: document.getElementById('cardFaculty'),
        issueDate: document.getElementById('cardIssueDate'),
        expiryDate: document.getElementById('cardExpiryDate'),
        photo: document.getElementById('cardPhoto'),
        headerLogoContainer: document.getElementById('cardHeaderLogoContainer'),
        headerLogo: document.getElementById('cardHeaderLogo'),
      };

      const cardBackElements = {
        address: document.getElementById('cardBackAddress'),
        notes: document.getElementById('cardBackNotes'),
        logo: document.getElementById('cardBackLogo'),
        signature: document.getElementById('cardSignatureText'),
      };

      const downloadFrontBtn = document.getElementById('downloadFrontBtn');
      const downloadBackBtn = document.getElementById('downloadBackBtn');
      const generatePhotoBtn = document.getElementById('generatePhotoBtn');
      const randomFillBtn = document.getElementById('randomFillBtn');
      const idCardFront = document.getElementById('idCardFront');
      const idCardBack = document.getElementById('idCardBack');

      let photoUploaded = false;

      // Functions
      function updateCard() {
        cardFrontElements.header.style.backgroundColor = inputs.headerColor.value;
        cardFrontElements.universityNameHeader.textContent = inputs.universityName.value || 'UNIVERSITY NAME';
        cardFrontElements.studentName.textContent = inputs.studentName.value || 'STUDENT NAME';
        cardFrontElements.studentId.textContent = inputs.studentId.value || 'STUDENT ID';
        cardFrontElements.faculty.textContent = inputs.faculty.value || 'FACULTY NAME';
        cardFrontElements.issueDate.textContent = inputs.issueDate.value || 'YYYY-MM-DD';
        cardFrontElements.expiryDate.textContent = inputs.expiryDate.value || 'YYYY-MM-DD';
        cardBackElements.address.textContent = inputs.cardHolderAddress.value || "HOLDER'S ADDRESS";
        cardBackElements.signature.textContent = inputs.studentName.value || "Your Name";

        const notesValue = inputs.officialNotes.value.trim();
        if (notesValue) {
          cardBackElements.notes.textContent = notesValue;
        } else {
          cardBackElements.notes.textContent = 'This card is the property of the university and must be returned upon request. If found, please return to the nearest university office.';
        }

        checkDownloadButtonsState();
      }

      function checkDownloadButtonsState() {
        const frontCanDownload = photoUploaded && 
          inputs.studentName.value.trim() !== '' && 
          inputs.studentId.value.trim() !== '' && 
          inputs.universityName.value.trim() !== '';
        downloadFrontBtn.disabled = !frontCanDownload;

        const backCanDownload = inputs.cardHolderAddress.value.trim() !== '';
        downloadBackBtn.disabled = !backCanDownload;
      }

      function downloadCard(element, side) {
        const wrapper = document.getElementById('headerContentWrapper');
        if (wrapper && side === 'Front') {
          wrapper.style.transform = 'translateY(-5px)';
        }

        html2canvas(element, { scale: 3, useCORS: true, backgroundColor: '#ffffff' })
          .then(canvas => {
            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/png');
            const studentName = inputs.studentName.value || 'student';
            link.download = `International-ID-${studentName}-${side}.png`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
          }).catch(err => {
            console.error(`Failed to generate ${side} image!`, err);
            alert(`Sorry, ${side} image generation failed. If you are using local images, please make sure you access this page through a local server (http://localhost:8000) and check if the image path is correct.`);
          }).finally(() => {
            if (wrapper && side === 'Front') {
              wrapper.style.transform = '';
            }
          });
      }

      // Event Listeners
      Object.values(inputs).forEach(input => {
        if (input.type !== 'file') {
          input.addEventListener('input', updateCard);
        }
      });

      inputs.studentPhoto.addEventListener('change', (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            cardFrontElements.photo.src = e.target.result;
            photoUploaded = true;
            checkDownloadButtonsState();
          };
          reader.readAsDataURL(file);
        }
      });

      function generateRandomPhoto() {
        const gender = Math.random() > 0.5 ? 'men' : 'women';
        const photoNumber = Math.floor(Math.random() * 101);
        const photoPath = `static/image/${gender}/${photoNumber}.jpg`;
        cardFrontElements.photo.src = photoPath;
        photoUploaded = true;
        checkDownloadButtonsState();
      }

      generatePhotoBtn.addEventListener('click', generateRandomPhoto);

      randomFillBtn.addEventListener('click', () => {
        randomFillBtn.disabled = true;
        const originalText = 'Random Fill All Info';
        randomFillBtn.textContent = '...';

        try {
          generateRandomPhoto();
          inputs.studentName.value = getRandomItem(mockData.names);
          inputs.universityName.value = getRandomItem(mockData.universities);
          inputs.faculty.value = `Faculty of ${getRandomItem(mockData.faculties)}`;
          inputs.cardHolderAddress.value = getRandomItem(mockData.addresses);
          inputs.studentId.value = `INT${Math.floor(100000 + Math.random() * 900000)}`;

          const issueDate = new Date();
          issueDate.setDate(issueDate.getDate() - Math.floor(Math.random() * 365 * 2));
          inputs.issueDate.value = issueDate.toISOString().split('T')[0];

          const expiryDate = new Date(issueDate);
          expiryDate.setFullYear(expiryDate.getFullYear() + 4);
          inputs.expiryDate.value = expiryDate.toISOString().split('T')[0];

          inputs.officialNotes.value = 'This card is the property of the university and must be returned upon request. If found, please return to the nearest university office.';

          updateCard();
        } catch (error) {
          console.error("Random fill failed:", error);
          alert('Sorry, an error occurred while filling random information.');
        } finally {
          setTimeout(() => {
            randomFillBtn.disabled = false;
            randomFillBtn.textContent = originalText;
          }, 300);
        }
      });

      inputs.schoolLogo.addEventListener('change', (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            const logoUrl = e.target.result;
            cardFrontElements.headerLogo.src = logoUrl;
            cardBackElements.logo.src = logoUrl;
            cardFrontElements.headerLogoContainer.classList.remove('hidden');
            cardBackElements.logo.classList.remove('hidden');
          };
          reader.readAsDataURL(file);
        }
      });

      downloadFrontBtn.addEventListener('click', () => downloadCard(idCardFront, 'Front'));
      downloadBackBtn.addEventListener('click', () => downloadCard(idCardBack, 'Back'));

      // Initialize
      updateCard();
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>International Student ID Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="js/1.4.1-html2canvas.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');
    body {
      font-family: 'Inter', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif';
    }
    /* Beautiful file upload button */
    input[type="file"]::file-selector-button {
      font-weight: 600;
      color: #dc2626;
      padding: 0.5em 1em;
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: 0.375rem;
      background-color: #fef2f2;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    input[type="file"]::file-selector-button:hover {
      background-color: #fee2e2;
    }
    /* Color picker styles */
    input[type="color"] {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      width: 100%;
      height: 40px;
      padding: 0;
      border: none;
      background-color: transparent;
      cursor: pointer;
    }
    input[type="color"]::-webkit-color-swatch-wrapper {
      padding: 0;
    }
    input[type="color"]::-webkit-color-swatch {
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
    }
    input[type="color"]::-moz-color-swatch {
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
    }
    /* Signature style */
    .signature-text {
      font-family: 'Dancing Script', cursive;
      font-size: 1.5rem;
      line-height: 2rem;
      color: #1f2937;
    }
  </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4 md:p-8">
  <div class="container w-full max-w-7xl mx-auto bg-white rounded-2xl shadow-2xl p-6 md:p-10">
    <div class="text-center mb-4">
      <h1 class="text-3xl md:text-4xl font-bold text-red-600">International Student ID Generator</h1>
      <p class="text-gray-500 mt-2">Create a custom identity card for international students (front and back).</p>
    </div>
    <div class="flex justify-center mb-8">
      <button id="randomFillBtn" class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition">Randomly Fill All Info</button>
    </div>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12">
      <div class="p-6 bg-gray-50 rounded-xl border border-gray-200">
        <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-3">üìù Front Side Information</h2>
        <div class="space-y-5 mb-8">
          <div>
            <label for="universityName" class="block text-sm font-medium text-gray-700 mb-1">University Name (English)</label>
            <input type="text" id="universityName" placeholder="e.g., International University" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
          </div>
          <div>
            <label for="studentName" class="block text-sm font-medium text-gray-700 mb-1">Student Name (Full English Name)</label>
            <input type="text" id="studentName" placeholder="e.g., John Appleseed" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
          </div>
          <div>
            <label for="studentId" class="block text-sm font-medium text-gray-700 mb-1">Student ID</label>
            <input type="text" id="studentId" placeholder="e.g., INT2025001" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
          </div>
          <div>
            <label for="faculty" class="block text-sm font-medium text-gray-700 mb-1">Faculty/Major (English)</label>
            <input type="text" id="faculty" placeholder="e.g., Faculty of Computer Science" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label for="issueDate" class="block text-sm font-medium text-gray-700 mb-1">Issue Date</label>
              <input type="date" id="issueDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
            </div>
            <div>
              <label for="expiryDate" class="block text-sm font-medium text-gray-700 mb-1">Valid Until</label>
              <input type="date" id="expiryDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Upload or Generate Photo</label>
            <div class="flex items-center space-x-2">
              <input type="file" id="studentPhoto" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100">
              <button type="button" id="generatePhotoBtn" class="px-3 py-2 bg-gray-600 text-white rounded-lg text-sm whitespace-nowrap hover:bg-gray-700 transition">Generate</button>
            </div>
          </div>
          <div>
            <label for="schoolLogo" class="block text-sm font-medium text-gray-700 mb-1">Upload School Logo (Optional)</label>
            <input type="file" id="schoolLogo" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100">
          </div>
          <div>
            <label for="headerColor" class="block text-sm font-medium text-gray-700 mb-1">Custom Header Color</label>
            <input type="color" id="headerColor" value="#dc2626">
          </div>
        </div>
        <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-3">üîô Back Side Information</h2>
        <div class="space-y-5">
          <div>
            <label for="cardHolderAddress" class="block text-sm font-medium text-gray-700 mb-1">Card Holder Address (English)</label>
            <input type="text" id="cardHolderAddress" placeholder="e.g., 123 Main Street, Anytown" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
          </div>
          <div>
            <label for="officialNotes" class="block text-sm font-medium text-gray-700 mb-1">Official Notes/Statement (English)</label>
            <textarea id="officialNotes" rows="3" placeholder="This card is the property of the university and must be returned upon request. If found, please return to the nearest university office." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition"></textarea>
          </div>
        </div>
      </div>
      <div class="flex flex-col items-center">
        <h2 class="text-xl font-semibold text-gray-800 mb-6">üñºÔ∏è Preview</h2>
        <div id="idCardFront" class="w-[380px] min-h-[240px] bg-white rounded-xl shadow-lg flex flex-col transition-all duration-300 overflow-hidden border">
          <div id="cardHeader" class="text-white p-3 flex items-center space-x-3">
            <div id="cardHeaderLogoContainer" class="w-12 h-12 rounded-full bg-white p-1 flex items-center justify-center overflow-hidden hidden">
              <img id="cardHeaderLogo" src="images/https:-student.frp.gs" alt="School Logo" class="max-w-full max-h-full object-contain rounded-full">
            </div>
            <div id="headerContentWrapper" class="flex flex-col">
              <h3 id="cardUniversityNameHeader" class="font-bold text-base leading-tight m-0">UNIVERSITY NAME</h3>
              <p class="text-xs opacity-90 leading-tight m-0">INTERNATIONAL STUDENT ID CARD</p>
            </div>
          </div>
          <div class="flex flex-grow p-4">
            <div class="flex-shrink-0 mr-4">
              <img id="cardPhoto" src="images/default-photo.svg" alt="Student Photo" class="w-[128px] h-[128px] object-cover border-2 border-white rounded-md shadow-md bg-gray-200">
            </div>
            <div class="text-xs text-gray-800 w-full flex flex-col justify-between">
              <div>
                <p class="font-semibold text-gray-500">NAME</p>
                <p class="font-bold text-sm" id="cardStudentName">STUDENT NAME</p>
              </div>
              <div>
                <p class="font-semibold text-gray-500">STUDENT ID</p>
                <p class="font-bold text-sm" id="cardStudentId">STUDENT ID</p>
              </div>
              <div>
                <p class="font-semibold text-gray-500">FACULTY</p>
                <p class="font-bold text-sm" id="cardFaculty">FACULTY NAME</p>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-2 flex justify-between items-center border-t mt-auto">
            <div class="text-xs">
              <p class="text-gray-500">ISSUE</p>
              <p class="font-semibold" id="cardIssueDate">YYYY-MM-DD</p>
            </div>
            <div class="text-xs text-right">
              <p class="text-gray-500">VALID</p>
              <p class="font-semibold" id="cardExpiryDate">YYYY-MM-DD</p>
            </div>
          </div>
        </div>
        <button id="downloadFrontBtn" class="mt-4 w-full max-w-xs bg-red-600 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-transform transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:transform-none" disabled>Download Front (PNG)</button>
        <hr class="my-8 w-full max-w-xs">
        <div id="idCardBack" class="w-[380px] h-[240px] bg-white rounded-xl shadow-lg flex flex-col transition-all duration-300 overflow-hidden border">
          <div class="w-full h-10 bg-black mt-4"></div>
          <div class="p-4 text-xs text-gray-700 flex-grow">
            <p class="font-semibold text-gray-500">HOLDER'S ADDRESS:</p>
            <p id="cardBackAddress" class="mb-3">HOLDER'S ADDRESS</p>
            <p id="cardBackNotes" class="text-[10px] leading-tight"></p>
          </div>
          <div class="px-4 pb-4 flex justify-between items-end">
            <div class="text-left">
              <div id="cardSignatureText" class="signature-text">Your Name</div>
              <p class="text-[10px] text-gray-500 pt-1">Holder's Signature</p>
            </div>
            <img id="cardBackLogo" src="images/https:-student.frp.gs" alt="School Logo" class="w-[70px] h-[70px] object-contain hidden">
          </div>
        </div>
        <button id="downloadBackBtn" class="mt-4 w-full max-w-xs bg-gray-700 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-transform transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:transform-none" disabled>Download Back (PNG)</button>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Mock data for random fill
      const mockData = {
        names: ['John Smith', 'Emily Johnson', 'Michael Williams', 'Jessica Brown', 'David Jones', 'Sarah Miller', 'John Smith', 'Emily Johnson', 'Michael Williams', 'Sophia Brown', 'William Jones', 'Olivia Garcia', 'James Miller', 'Ava Davis', 'Robert Rodriguez', 'Isabella Martinez', 'David Hernandez', 'Mia Lopez', 'Joseph Gonzalez', 'Charlotte Wilson', 'Charles Anderson', 'Amelia Thomas', 'Thomas Moore', 'Harper Jackson', 'Daniel White', 'Evelyn Harris'],
        universities: ['International University of Science', 'Global Tech Institute', 'Metropolitan University', 'World Arts College', 'United Scholars University' 'Princeton University', 'Massachusetts Institute of Technology (MIT)', 'Harvard University', 'Stanford University', 'Yale University',,'University of Pennsylvania', 'California Institute of Technology (Caltech)', 'Duke University', 'Brown University', 'Johns Hopkins University', 'Northwestern University', 'Columbia University', 'Cornell University', 'University of Chicago', 'University of California, Berkeley (UC Berkeley)', 'University of California, Los Angeles (UCLA)', 'Carnegie Mellon University', 'Georgetown University', 'University of Michigan - Ann Arbor', 'New York University (NYU)'],
        faculties: ['Computer Science', 'International Relations', 'Medicine', 'Economics', 'Linguistics', 'Engineering'],
        addresses: [
			'123 Main Street, Anytown, USA',
			'456 Oak Avenue, Springfield, USA',
			'789 Pine Lane, Metropolis, USA',
			'101 Maple Drive, Gotham, USA'
			'Princeton, NJ 08544, USA'
			'77 Massachusetts Ave, Cambridge, MA 02139, USA'
			'Cambridge, MA 02138, USA'
			'Stanford, CA 94305, USA'
			'New Haven, CT 06520, USA'
			'Philadelphia, PA 19104, USA'
			'1200 E California Blvd, Pasadena, CA 91125, USA'
			'Durham, NC 27708, USA'
			'Providence, RI 02912, USA'
			'Baltimore, MD 21218, USA'
			'Evanston, IL 60208, USA'
			'New York, NY 10027, USA'
			'Ithaca, NY 14853, USA'
			'Chicago, IL 60637, USA'
			'Berkeley, CA 94720, USA'
			'Los Angeles, CA 90095, USA'
			'Pittsburgh, PA 15213, USA'
			'Washington, DC 20057, USA'
			'Ann Arbor, MI 48109, USA'
			'New York, NY 10003, USA'
        ]
      };

      function getRandomItem(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
      }

      // DOM Element References
      const inputs = {
        universityName: document.getElementById('universityName'),
        studentName: document.getElementById('studentName'),
        studentId: document.getElementById('studentId'),
        faculty: document.getElementById('faculty'),
        issueDate: document.getElementById('issueDate'),
        expiryDate: document.getElementById('expiryDate'),
        studentPhoto: document.getElementById('studentPhoto'),
        schoolLogo: document.getElementById('schoolLogo'),
        headerColor: document.getElementById('headerColor'),
        cardHolderAddress: document.getElementById('cardHolderAddress'),
        officialNotes: document.getElementById('officialNotes'),
      };

      const cardFrontElements = {
        header: document.getElementById('cardHeader'),
        universityNameHeader: document.getElementById('cardUniversityNameHeader'),
        studentName: document.getElementById('cardStudentName'),
        studentId: document.getElementById('cardStudentId'),
        faculty: document.getElementById('cardFaculty'),
        issueDate: document.getElementById('cardIssueDate'),
        expiryDate: document.getElementById('cardExpiryDate'),
        photo: document.getElementById('cardPhoto'),
        headerLogoContainer: document.getElementById('cardHeaderLogoContainer'),
        headerLogo: document.getElementById('cardHeaderLogo'),
      };

      const cardBackElements = {
        address: document.getElementById('cardBackAddress'),
        notes: document.getElementById('cardBackNotes'),
        logo: document.getElementById('cardBackLogo'),
        signature: document.getElementById('cardSignatureText'),
      };

      const downloadFrontBtn = document.getElementById('downloadFrontBtn');
      const downloadBackBtn = document.getElementById('downloadBackBtn');
      const generatePhotoBtn = document.getElementById('generatePhotoBtn');
      const randomFillBtn = document.getElementById('randomFillBtn');
      const idCardFront = document.getElementById('idCardFront');
      const idCardBack = document.getElementById('idCardBack');

      let photoUploaded = false;

      // Functions
      function updateCard() {
        cardFrontElements.header.style.backgroundColor = inputs.headerColor.value;
        cardFrontElements.universityNameHeader.textContent = inputs.universityName.value || 'UNIVERSITY NAME';
        cardFrontElements.studentName.textContent = inputs.studentName.value || 'STUDENT NAME';
        cardFrontElements.studentId.textContent = inputs.studentId.value || 'STUDENT ID';
        cardFrontElements.faculty.textContent = inputs.faculty.value || 'FACULTY NAME';
        cardFrontElements.issueDate.textContent = inputs.issueDate.value || 'YYYY-MM-DD';
        cardFrontElements.expiryDate.textContent = inputs.expiryDate.value || 'YYYY-MM-DD';
        cardBackElements.address.textContent = inputs.cardHolderAddress.value || "HOLDER'S ADDRESS";
        cardBackElements.signature.textContent = inputs.studentName.value || "Your Name";

        const notesValue = inputs.officialNotes.value.trim();
        if (notesValue) {
          cardBackElements.notes.textContent = notesValue;
        } else {
          cardBackElements.notes.textContent = 'This card is the property of the university and must be returned upon request. If found, please return to the nearest university office.';
        }

        checkDownloadButtonsState();
      }

      function checkDownloadButtonsState() {
        const frontCanDownload = photoUploaded && 
          inputs.studentName.value.trim() !== '' && 
          inputs.studentId.value.trim() !== '' && 
          inputs.universityName.value.trim() !== '';
        downloadFrontBtn.disabled = !frontCanDownload;

        const backCanDownload = inputs.cardHolderAddress.value.trim() !== '';
        downloadBackBtn.disabled = !backCanDownload;
      }

      function downloadCard(element, side) {
        const wrapper = document.getElementById('headerContentWrapper');
        if (wrapper && side === 'Front') {
          wrapper.style.transform = 'translateY(-5px)';
        }

        html2canvas(element, { scale: 3, useCORS: true, backgroundColor: '#ffffff' })
          .then(canvas => {
            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/png');
            const studentName = inputs.studentName.value || 'student';
            link.download = `International-ID-${studentName}-${side}.png`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
          }).catch(err => {
            console.error(`Failed to generate ${side} image!`, err);
            alert(`Sorry, ${side} image generation failed. If you are using local images, please make sure you access this page through a local server (http://localhost:8000) and check if the image path is correct.`);
          }).finally(() => {
            if (wrapper && side === 'Front') {
              wrapper.style.transform = '';
            }
          });
      }

      // Event Listeners
      Object.values(inputs).forEach(input => {
        if (input.type !== 'file') {
          input.addEventListener('input', updateCard);
        }
      });

      inputs.studentPhoto.addEventListener('change', (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            cardFrontElements.photo.src = e.target.result;
            photoUploaded = true;
            checkDownloadButtonsState();
          };
          reader.readAsDataURL(file);
        }
      });

      function generateRandomPhoto() {
        const gender = Math.random() > 0.5 ? 'men' : 'women';
        const photoNumber = Math.floor(Math.random() * 101);
        const photoPath = `static/image/${gender}/${photoNumber}.jpg`;
        cardFrontElements.photo.src = photoPath;
        photoUploaded = true;
        checkDownloadButtonsState();
      }

      generatePhotoBtn.addEventListener('click', generateRandomPhoto);

      randomFillBtn.addEventListener('click', () => {
        randomFillBtn.disabled = true;
        const originalText = 'Random Fill All Info';
        randomFillBtn.textContent = '...';

        try {
          generateRandomPhoto();
          inputs.studentName.value = getRandomItem(mockData.names);
          inputs.universityName.value = getRandomItem(mockData.universities);
          inputs.faculty.value = `Faculty of ${getRandomItem(mockData.faculties)}`;
          inputs.cardHolderAddress.value = getRandomItem(mockData.addresses);
          inputs.studentId.value = `INT${Math.floor(100000 + Math.random() * 900000)}`;

          const issueDate = new Date();
          issueDate.setDate(issueDate.getDate() - Math.floor(Math.random() * 365 * 2));
          inputs.issueDate.value = issueDate.toISOString().split('T')[0];

          const expiryDate = new Date(issueDate);
          expiryDate.setFullYear(expiryDate.getFullYear() + 4);
          inputs.expiryDate.value = expiryDate.toISOString().split('T')[0];

          inputs.officialNotes.value = 'This card is the property of the university and must be returned upon request. If found, please return to the nearest university office.';

          updateCard();
        } catch (error) {
          console.error("Random fill failed:", error);
          alert('Sorry, an error occurred while filling random information.');
        } finally {
          setTimeout(() => {
            randomFillBtn.disabled = false;
            randomFillBtn.textContent = originalText;
          }, 300);
        }
      });

      inputs.schoolLogo.addEventListener('change', (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            const logoUrl = e.target.result;
            cardFrontElements.headerLogo.src = logoUrl;
            cardBackElements.logo.src = logoUrl;
            cardFrontElements.headerLogoContainer.classList.remove('hidden');
            cardBackElements.logo.classList.remove('hidden');
          };
          reader.readAsDataURL(file);
        }
      });

      downloadFrontBtn.addEventListener('click', () => downloadCard(idCardFront, 'Front'));
      downloadBackBtn.addEventListener('click', () => downloadCard(idCardBack, 'Back'));

      // Initialize
      updateCard();
    });
  </script>
</body>
</html>
